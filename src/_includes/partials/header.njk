{# Site Header with Navigation #}
{% from "_components/index.njk" import button %}

<header class="sticky top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-zinc-200 hc:border-zinc-400" x-data="{ mobileMenuOpen: false }">
  <div class="container">
    <nav class="flex items-center justify-between h-16 md:h-20">
      {# Logo #}
      <a href="/" class="flex items-center gap-2 text-xl font-bold text-zinc-900 no-underline hover:text-primary-700 flex-1">
        <img src="/favicon-96x96.png" alt="" width="32" height="32" class="w-8 h-8" eleventy:ignore>
        <span class="hidden sm:inline">{{ metadata.title | default("Electric Lime") }}</span>
        <span class="sr-only">{{ metadata.title | default("Electric Lime") }}</span>
      </a>

      {# Desktop Navigation #}
      <div class="hidden md:flex items-center gap-8">
        {% for item in header.navigation %}
          <a
            href="{{ item.url }}"
            class="nav-link text-sm font-medium text-zinc-600 hover:text-primary-700 transition-colors no-underline hc:text-zinc-800 hc:hover:text-primary-800 hc:hover:underline{% if page.url == item.url %} text-primary-700 hc:text-primary-800{% endif %}"
          >
            {{ item.label }}
          </a>
        {% endfor %}
      </div>

      {# Right side: Search + CTA + Mobile menu #}
      <div class="flex items-center justify-end gap-3 flex-1">
        {# Search icon #}
        {% if header.show_search %}
        <a href="/search/" class="p-2 text-zinc-600 hover:text-primary-700 transition-colors hc:text-zinc-800" aria-label="Search">
          {% phosphor "magnifying-glass", "bold", { size: 20 } %}
        </a>
        {% endif %}

        {# Desktop CTA #}
        {% if header.cta %}
          <div class="hidden md:block">
            {{ button({
              text: header.cta.label,
              url: header.cta.url,
              variant: "primary",
              size: "sm"
            }) }}
          </div>
        {% endif %}

        {# Mobile menu button #}
        <button
          type="button"
          @click="mobileMenuOpen = !mobileMenuOpen"
          class="md:hidden p-2 text-zinc-600 hover:text-zinc-900 hc:text-zinc-800"
          :aria-expanded="mobileMenuOpen"
          aria-label="Toggle navigation menu"
        >
          <span x-show="!mobileMenuOpen">{% phosphor "list", "bold", { size: 24 } %}</span>
          <span x-show="mobileMenuOpen" x-cloak>{% phosphor "x", "bold", { size: 24 } %}</span>
        </button>
      </div>
    </nav>

    {# Mobile Navigation #}
    <div
      x-show="mobileMenuOpen"
      x-cloak
      x-collapse
      class="md:hidden border-t border-zinc-200 hc:border-zinc-400"
    >
      <div class="py-4 space-y-2">
        {% for item in header.navigation %}
          <a
            href="{{ item.url }}"
            @click="mobileMenuOpen = false"
            class="block px-4 py-2 text-base font-medium text-zinc-600 hover:text-primary-700 hover:bg-zinc-50 rounded-lg no-underline hc:text-zinc-800 hc:hover:text-primary-800{% if page.url == item.url %} text-primary-700 bg-primary-50 hc:text-primary-800{% endif %}"
          >
            {{ item.label }}
          </a>
        {% endfor %}

        {# Mobile CTA #}
        {% if header.cta %}
          <div class="px-4 pt-4">
            {{ button({
              text: header.cta.label,
              url: header.cta.url,
              variant: "primary",
              full: true
            }) }}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</header>
